<!DOCTYPE html>

<title>Roller Coaster Simulator</title>

<h1>Roller Coaster Simulator</h1>

<textarea id="data"></textarea>

<label>User name</label><textarea id="user"></textarea>

<label>File name</label><textarea id="file"></textarea>

<label for="request type"></label>

<select id="select">
    <option value="list">list</option>
    <option value="get">get</option>
    <option value="set" selected>set</option>
</select>

<button>Submit</button>

<script>
    var url = 'roller-coaster-simulator.mybluemix.net';
    var request = document.getElementById("data");
    var filename = document.getElementById("file");
    var username = document.getElementById("user");
    var requestType = document.getElementById("select");
    document.getElementsByTagName('button')[0]
        .addEventListener('click', function () { 
            var request = new XMLHttpRequest();
            request.addEventListener('readystatechange', function () {
                if (request.readyState === 4) {
                    alert(request.response);
                }
            });
            request.open('POST', url, true);
            request.setRequestHeader('Content-Type', 'application/json');
            
            var obj = {};
            obj.user = username.value;
            obj.request = requestType.value;
            obj.file = filename.value;
            obj.data = request.value;

            alert('---sent obj contents---\n' +
                  'user:' + obj.user + '\n' +
                  'request:' + obj.request + '\n' +
                  'file:' + obj.file + '\n' +
                  'data:' + obj.data);

            request.send(JSON.stringify(obj));
        });
</script>
